<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.12.0/bootstrap-social.css">


    <title>Clubby - Register</title>
</head>
<body>
<script src="../../node_modules/jquery/dist/jquery.min.js" ></script>
 <script src="../../node_modules/bootstrap-validator/dist/validator.js" ></script>
<!-- <script src="../../dist/jquery.min.js" ></script>
<script src="../../dist/validator.js" ></script>-->

<div th:if="${registred} == null" style="margin-top: 90px;">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Sign up in Clubby <small>It's free!</small></h3>
        </div>
        <div class="panel-body">
            <form role="form" data-toggle="validator" method="post" >
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group">
                            <input th:value="${firstName}" type="text"  name="firstName" id="firstName" class="form-control input-sm" placeholder="First Name" required>
                            <div class="help-block with-errors"></div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group">
                            <input th:value="${lastName}" type="text" name="lastName" id="lastName" class="form-control input-sm" placeholder="Last Name" required>
                            <div class="help-block with-errors"></div>
                        </div>
                    </div>
                </div>

                <div th:class="(${duplicateEmail}? 'has-error has-danger ' : '') + form-group" class="form-group">
                    <input  th:value="${email}" type="email" name="email" id="email" class="form-control input-sm" placeholder="Email Address" data-error="Enter valid email" required>
                    <div class="help-block with-errors">
                        <ul th:if="${duplicateEmail} == true" class="list-unstyled"><li id="duplicateEmailError">Email already registred!</li></ul>
                    </div>
                </div>

                <div th:class="(${duplicateUserName}? 'has-error has-danger ' : '') + form-group" class="form-group">
                    <input th:value="${userName}" name="userName" id="userName" class="form-control input-sm" placeholder="Username" data-error="Enter user name" required>
                    <div class="help-block with-errors">
                        <ul th:if="${duplicateUserName} == true" class="list-unstyled"><li id="duplicateUserNameError">User name already taken by someone else. Try other!</li></ul>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group">
                            <input type="password" name="password" id="password" class="form-control input-sm" placeholder="Password" required data-minlength="6" data-error="Password should be at least 6 characters length">
                            <div class="help-block with-errors"></div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6">
                        <div class="form-group">
                            <input type="password" name="passwordConfirm" id="passwordConfirm" class="form-control input-sm" placeholder="Confirm Password" data-match="#password" data-match-error="Passwords does not match" required>
                            <div class="help-block with-errors"></div>
                        </div>
                    </div>
                </div>

                <input type="submit" value="Register" class="btn btn-info btn-block">

            </form>
        </div>
    </div>
</div>

<div th:if="${registred} == true" style="text-align:center;">
    <h1>Account has been created successfully!</h1>
    <h1>Click <a href="/login">here</a> and login now!</h1>
</div>

<script>
    function onEmailKeyDown(e){
        $('#email').off('keydown', onEmailKeyDown);
        $('#duplicateEmailError').remove();
    }
    $('#email').on('keydown', onEmailKeyDown);

    function onUserNameKeyDown(e){
        $('#userName').off('keydown', onUserNameKeyDown);
        $('#duplicateUserNameError').remove();
    }
    $('#userName').on('keydown', onUserNameKeyDown);
</script>

</body>
</html>